<view class="page">
  <view class="card">
    <view class="row">
      <view class="title">五套方案状态</view>
      <view class="muted">{{statusText}}</view>
    </view>
    <view class="row" style="margin-top: 12rpx;">
      <button class="btn" size="mini" bindtap="onRefresh">刷新</button>
      <button class="btn" size="mini" bindtap="onGenerate">生成决策(近一年)</button>
      <button class="btn" size="mini" bindtap="onMark">更新净值(近30日)</button>
    </view>
  </view>

  <block wx:for="{{variants}}" wx:key="id">
    <view class="card" bindtap="goVariant" data-id="{{item.id}}">
      <view class="row">
        <view class="title">{{item.label}} <text wx:if="{{item.is_active}}">(主)</text></view>
        <view class="muted">{{item.asof || "-"}}</view>
      </view>
      <view class="row" style="margin-top: 10rpx;">
        <view>净值：{{item.nav}}</view>
        <view>回撤：{{item.mdd}}</view>
      </view>
      <view class="muted" style="margin-top: 6rpx;">
        持仓：{{item.posText}}
      </view>
      <view class="row" style="margin-top: 10rpx;">
        <button size="mini" bindtap="goExecute" data-id="{{item.id}}">执行确认</button>
        <button size="mini" bindtap="setActive" data-id="{{item.id}}">设为主</button>
      </view>
    </view>
  </block>
</view>

