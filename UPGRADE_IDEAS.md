# ETF 等权组合 & 动量轮动：可升级研究方向清单

本文档汇总当前系统在“等权组合（基准）”与“动量轮动策略”上的可升级研究方向，目标是把策略从“能回测/能可视化”推进到“可解释、可稳健、可上线”。

---

## 1) 把等权组合做成“可靠基准”

### 1.1 再平衡频率敏感性
- **做什么**：系统化比较 `daily/weekly/monthly/quarterly/yearly/none` 的表现差异。
- **关注点**：收益、回撤、换手、风险指标（Sharpe/Sortino/UPI）、周期胜率/赔率、相关结构变化。
- **产出**：频率-绩效曲线与表格，识别“基准口径”对策略超额的影响。

### 1.2 风险预算版等权（基准增强）
- **做什么**：从纯等权升级到：
  - **风险平价（Risk Parity）**
  - **最小方差（Minimum Variance）**
  - **最大分散（Maximum Diversification）**
- **价值**：提供更强的“可被击败的基准”，避免轮动策略只是在击败弱基准。

### 1.3 归因：分阶段收益/风险贡献
- **做什么**：基于你已实现的“收益贡献/风险贡献”，进一步做滚动窗口归因：
  - 每个标的在不同年份/不同市场阶段的贡献变化
  - 识别“基准收益主要来自哪一段、哪一个资产”
- **价值**：解释“组合赚钱的来源是否可持续”，并为轮动策略的风险控制提供依据。

---

## 2) 轮动策略：把收益来源拆开看（信号层→组合层→执行层）

### 2.1 信号体系扩展（从单因子到多因子）
- **动量增强**：
  - 多窗口动量（20/60/120/252）加权或投票
  - 绝对动量 + 相对动量联合
  - `skip_days` 作为可选项（0/5/20 等），研究其对短期反转的抑制效果
- **趋势/过滤器**（降低回撤）：
  - 均线过滤（如 60/120 日 MA）
  - 突破过滤、回撤过滤
  - 波动过滤（高波动降权/空仓）

### 2.2 调仓与持仓约束（抑制过度换手）
- **最小持仓期**：避免连续翻仓
- **换仓门槛**：只有当新标的动量显著优于旧标的时才换
- **TopK/权重约束**：
  - TopK 从 1→N 的稳健性
  - 权重上限/下限、分散约束

### 2.3 成本与冲击建模（贴近实盘）
- **从固定 bps 到“与现实相关”**：
  - 成本与换手/波动/成交额相关
  - 加入滑点、交易延迟（T+1）、无法成交/成交部分等
- **价值**：避免回测“纸上收益”，把策略推向可执行。

### 2.4 风险控制增强（从 floor/risk-off 到风险预算）
- **目标波动（Vol Targeting）**：动态缩放仓位，使组合波动趋于稳定
- **回撤控制**：最大回撤触发减仓/空仓/切防守
- **尾部风险阈值**：极端波动/极端相关上升时降风险

---

## 3) 稳健性与“数据挖掘”防护（强烈建议优先）

### 3.1 Walk-Forward（滚动训练/验证）
- **做什么**：滚动窗口内选参数/选模型 → 下一段做验证，反复推进
- **指标**：策略表现的稳定性（均值、方差、最差窗口、回撤分布、胜率分布）
- **价值**：把“样本内有效”推进到“样本外可信”。

### 3.2 参数热力图与窄峰识别
- **做什么**：对 `lookback/skip/top_k/rebalance/floor/cost` 做网格搜索
- **重点**：识别是否存在“窄峰”（只在很小参数范围内有效）→ 这往往是过拟合信号。

### 3.3 蒙特卡洛模拟升级（你已实现基础版）
- **滚动窗口**：只用近 N 年/近 N 交易日作为采样池（更贴近当前市场）
- **压力片段注入**：加入危机片段权重或按概率插入尾部区块
- **波动/相关情景**：波动缩放、分 regime 模拟、极端相关上升情景

---

## 4) 统计检验：从“看起来好”到“有证据”

### 4.1 超额显著性
- **做什么**：对超额日收益做显著性检验（建议考虑自相关稳健，如 Newey-West）
- **输出**：p-value、置信区间、稳健标准误

### 4.2 回撤与持有体验
- **做什么**：最大回撤、回撤持续时间、UI/UPI 的分布对比
- **价值**：解释“体验提升”的统计意义。

### 4.3 胜率/赔率分解
- **做什么**：将收益提升分解为：
  - 胜率提升（p↑）
  - 盈亏比提升（b↑）
  - 以及它们在不同市场阶段的稳定性

---

## 5) 组合层面的风险视角（宏观与相关结构）

### 5.1 相关结构漂移与危机相关
- **做什么**：滚动相关矩阵、危机期相关上升、资产间相关结构变化
- **价值**：解释策略在危机期为何失效/有效。

### 5.2 因子暴露（解释性）
- **做什么**：把 ETF 归因到股票/利率/黄金/美元等大类风险因子
- **价值**：解释“轮动在宏观周期里究竟押注了什么”。

### 5.3 压力测试（指定子区间）
- **做什么**：对 2015/2018/2020/2022 等子区间单独出报表
- **价值**：把策略暴露在真实历史压力环境下评估。

---

## 6) 实盘落地工程（从研究到可交易系统）

### 6.1 信号→持仓→订单→执行→风控闭环
- **状态机**：持仓、调仓、现金、失败重试、异常数据处理
- **交易日历**：调仓日、执行日、节假日、停牌、申赎限制

### 6.2 可复现研究流水线
- **版本化**：数据版本 + 策略版本 + 参数版本 + 结果快照
- **结果落库**：便于对比不同实验与回归测试

---

## 推荐优先级（建议）

1. **稳健性（Walk-Forward + 参数热力图 + MC滚动窗口/压力注入）**
2. **执行与成本模型（让回测更接近实盘）**
3. **风险控制增强（vol targeting / 回撤控制）**
4. **信号体系扩展（多窗口/多因子）**
5. **更强基准（Risk Parity/MinVar）与因子解释**
